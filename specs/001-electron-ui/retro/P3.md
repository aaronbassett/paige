# Phase 3 Retrospective: Dashboard Home Screen

## What Worked Well
- **Parallel agent execution**: All 6 dashboard section components were created concurrently using parallel subagents. Each agent independently produced working, lint-clean, type-safe code
- **Three-state rendering pattern**: null→skeleton, empty→message, populated→content worked consistently across all 6 components. Each agent independently arrived at the same pattern
- **Pure SVG for DreyfusRadar**: No charting library needed. Pure SVG with polarToCartesian calculations + bar chart fallback for <3 axes was clean and dependency-free
- **Integration test with handler capture**: MockOn handler capture pattern made it easy to simulate WebSocket data flow in tests without real connections

## What Didn't Work
- **Git stash conflicts across worktrees**: Pulling rebase after stashing caused merge conflicts in unrelated files (specs/002-backend-server/tasks.md). Required manual conflict resolution
- **Cross-component TypeScript errors during parallel creation**: Each agent saw "Cannot find module" errors for sibling components not yet created. Transient but caused false alarm during individual agent validation

## Workarounds & Solutions
- **Git stash + rebase workflow**: `git stash` → `git pull --rebase origin main` → `git stash pop` → resolve conflicts with `git checkout --theirs` for unrelated files
- **Luminance-based contrast for label pills**: GitHubIssues uses `(0.299*R + 0.587*G + 0.114*B) / 255` to compute luminance and pick black/white text for colored label backgrounds

## Packages & Dependencies
- **@testing-library/user-event**: Added for integration tests — provides realistic click simulation vs fireEvent
- **No charting library needed**: DreyfusRadar pure SVG approach avoided adding chart.js/recharts/d3 dependency

## Patterns & Code
- **Golden ratio grid**: `gridTemplateColumns: '38fr 62fr'` / `'62fr 38fr'` creates visually balanced asymmetric layouts
- **Conditional row visibility**: Row 2 uses `{(hasInProgressTasks || challenges !== null) && <div>...`} to hide entire grid row when both data sources are empty/null
- **Handler capture test pattern**: `mockOn.mockImplementation((type, handler) => { handlers[type] = handler; return vi.fn(); })` then `act(() => handlers['type']?.(msg))` to simulate WebSocket messages in React tests
- **Figlet section headers**: `<pre className="figlet-header">SECTION NAME</pre>` provides consistent ASCII treatment across all dashboard sections

## For Next Time
- **Run full typecheck after all parallel agents complete**: Individual agent typecheck may show false errors from missing sibling components. Only the final combined check is definitive
- **Stash before rebase only when needed**: Check if working tree is clean first to avoid unnecessary stash/pop conflict cycles
